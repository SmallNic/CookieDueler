<!doctype html>
<html>
<head>
  <title>Cookie Dueler</title>
  <link rel="stylesheet" href="/css/style.css">
</head>
<body>
  {{{body}}}
</body>
<script src="/socket.io/socket.io.js"></script>
<script src="../socket.io/socket.io.js"></script>
<script src="https://cdn.socket.io/socket.io-1.2.0.js"></script>
<script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
<!-- <script src = "../public/javascript/app.js"></script> -->
<script>




  $(document).ready(function(){

    var leftCounter = 0;
    var rightCounter = 0;

    var socket = io();

    $("#leftCookie").click(function(){
      socket.emit('leftClick')
      return false;
    })

    socket.on('leftClick', function(){
      leftCounter ++
      $(".leftClickCounter").text(leftCounter)
    })

    $("#rightCookie").click(function(){
      socket.emit('rightClick')
      return false;
    })

    socket.on('rightClick', function(){
      rightCounter ++
      $(".rightClickCounter").text(rightCounter)
    })

    // $("#leftCookie").on("click", function(){
    //   leftCounter ++
    //   console.log("leftClick")
    //   $(".leftClickCounter").text(leftCounter)
    // })

    // $("#rightCookie").on("click", function(){
    //   rightCounter ++
    //   console.log("rightClick")
    //   $(".rightClickCounter").text(rightCounter)
    // })

    $("#leftCookie").on("mousedown", function(){
      $("#leftCookie").attr("width", "190")
    })

    $("#leftCookie").on("mouseup", function(){
      $("#leftCookie").attr("width", "200")
    })

    $("#rightCookie").on("mousedown", function(){
      $("#rightCookie").attr("width", "190")
    })

    $("#rightCookie").on("mouseup", function(){
      $("#rightCookie").attr("width", "200")
    })

    var start = $("#start")
    var countdown = $("#countdown")
    start.on("click", startCountDown)

    var intervalID;
    var secondCounter = 0
    var minuteCounter = 1
    var hundredthSecondCounter = 0

    function startCountDown() {
      clearInterval(intervalID);
      intervalID = setInterval(tick, 10)
    }

    function tick () {
      countdown.text(leadingZero(minuteCounter) + ":" + leadingZero(secondCounter) + ":" + leadingZero(hundredthSecondCounter))

      if (secondCounter === 0 && minuteCounter === 0 && hundredthSecondCounter === 0 ){
        clearInterval(intervalID);
        secondCounter = 0
        minuteCounter = 1
        countdown.text(leadingZero(minuteCounter) + ":" + leadingZero(secondCounter))
        


      }
      if (hundredthSecondCounter === 0 && secondCounter > 0) {
        secondCounter --
        hundredthSecondCounter = 99

      }
      if (hundredthSecondCounter === 0 && secondCounter === 0 && minuteCounter > 0) {
        minuteCounter --
        secondCounter = 59
        hundredthSecondCounter = 99
      }
      hundredthSecondCounter --
    }

    function leadingZero(n){
      return n > 9 ? n : "0" + n;
    }


  })

</script>

</html>
